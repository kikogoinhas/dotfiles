#!/bin/bash

autoload -Uz compinit && compinit

eval "$(op completion zsh)"; compdef _op op

# Aliases
alias dotfiles="git --git-dir=$HOME/.dotfiles/ --work-tree=$HOME"
alias python=python3
alias destinusws="cd $HOME/Documents/destinus"
alias terraform="tofu"
alias colima-start=colima start --arch aarch64 --vm-type=vz --vz-rosetta --network-address

# PATH
HOME_BIN=$HOME/bin
export PATH="${ASDF_DATA_DIR:-$HOME/.asdf}/shims:$PATH"

if [ ! -d "$HOME_BIN" ]; then
  mkdir "$HOME_BIN"
fi

function load_secrets() {
	export GITEA_TOKEN=$(op read "op://Software Development/gitea_token/credencial")
	export JFROG_ARTIFACTORY_TOKEN=$(op read "op://Software Development/jfrog_artifactory_token/credencial")
}

export PATH=$PATH:$HOME/bin

export TESTCONTAINERS_DOCKER_SOCKET_OVERRIDE=/var/run/docker.sock
export TESTCONTAINERS_HOST_OVERRIDE=$(colima ls -j | jq -r '.address')

# append completions to fpath
fpath=(${ASDF_DATA_DIR:-$HOME/.asdf}/completions $fpath)
